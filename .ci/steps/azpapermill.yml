

parameters:
  notebook: 01_DataPrep.ipynb  # defaults for any parameters that aren't specified
  location: "{{cookiecutter.project_name}}"
  azureSubscription: 'AICAT-VB-E2E (989b90f7-da4f-41f9-84c9-44848802052d)'
  conda: MLAKSDeployAML


steps:
- task: AzureCLI@1
  displayName: ${{parameters.notebook}}
  inputs:
    azureSubscription: ${{parameters.azureSubscription}}
    scriptLocation: inlineScript
    inlineScript: |
      source activate ${{parameters.conda}}
      cd ${{parameters.location}}
      echo Execute ${{parameters.notebook}}
      papermill ${{parameters.notebook}} output.ipynb \
        --log-output \
        --no-progress-bar \
        -k python3
